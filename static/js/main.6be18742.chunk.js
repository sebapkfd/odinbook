(this.webpackJsonpodinbook=this.webpackJsonpodinbook||[]).push([[0],{25:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var r=n(2),s=n.n(r),a=n(18),c=n.n(a),o=(n(25),n(7)),u=n(5),i=n(1),l=n.n(i),p=n(3),j=n(4),d="https://immense-inlet-51361.herokuapp.com/",b=function(){var e=Object(p.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(d+"posts",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+JSON.parse(localStorage.getItem("userSession")).token}});case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(d+"posts/"+t,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+JSON.parse(localStorage.getItem("userSession")).token}});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(d+"posts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+JSON.parse(localStorage.getItem("userSession")).token},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(d+"posts/"+t,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+JSON.parse(localStorage.getItem("userSession")).token},body:JSON.stringify({id:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(d+"posts/"+t.id,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+JSON.parse(localStorage.getItem("userSession")).token},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(d+"posts/"+t.id+"/like",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+JSON.parse(localStorage.getItem("userSession")).token},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),v=n(0),g=function(){var e=Object(r.useState)(""),t=Object(j.a)(e,2),n=t[0],s=t[1],a=function(){var e=Object(p.a)(l.a.mark((function e(t){var r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=JSON.parse(localStorage.getItem("userSession")).user._id,s={user:r,text:n},e.next=5,h(s);case 5:window.location.reload();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{className:"post-input",children:Object(v.jsxs)("form",{onSubmit:a,children:[Object(v.jsx)("textarea",{name:"text",placeholder:"Text",value:n,required:!0,maxLength:200,onChange:function(e){return s(e.target.value)}}),Object(v.jsx)("button",{children:"Post"})]})})},S=n(19),k=function(){if(localStorage.length>0){var e=JSON.parse(localStorage.getItem("userSession")).token;try{var t=Object(S.a)(e).exp;return!(Date.now()>=1e3*t)||(localStorage.clear(),!1)}catch(n){console.log(n)}}},N=function(e){var t=e.element,n=e.deleteFunction,s=e.likeFunction,a=e.editLink,c=e.initialLikeStatus,o=e.likes,i=Object(r.useState)(c),d=Object(j.a)(i,2),b=d[0],f=d[1],h=Object(r.useState)(o.length),O=Object(j.a)(h,2),x=O[0],m=O[1],g=Object(u.g)(),S=function(){var e=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(p.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,s();case 3:n=e.sent,"Like added"===n.msg?(f("Liked"),m(x+1)):(f("Like"),m(x-1));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=k()?JSON.parse(localStorage.getItem("userSession")).user._id:null,y=t.user._id===w?Object(v.jsx)("button",{onClick:S,children:"Delete"}):null,C=t.user._id===w?Object(v.jsx)("button",{onClick:function(e){e.preventDefault(),g.push(a)},children:"Edit"}):null,_=Object(v.jsxs)("button",{onClick:N,className:b,children:[x," ",b]});return Object(v.jsxs)("div",{className:"options",children:[_,y,C]})},w=function(e){var t=e.post,n=e.useLink,s=e.defaultState,a=JSON.parse(localStorage.getItem("userSession")).user._id,c=t.likes,u=Object(r.useState)(s),i=Object(j.a)(u,2),d=i[0],b=i[1],f=function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t._id);case 2:b(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(p.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m({user:a,id:t._id});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=n?Object(v.jsx)(o.b,{to:"/odinbook/posts/".concat(t._id),children:Object(v.jsx)("p",{children:t.text})}):Object(v.jsx)("p",{children:t.text}),g=c.includes(a)?"Liked":"Like";return d?Object(v.jsxs)("div",{className:"post-item",children:[Object(v.jsx)(o.b,{to:"/odinbook/users/".concat(t.user._id),children:Object(v.jsxs)("p",{className:"post-item__username",children:[t.user.firstName," ",t.user.lastName]})}),Object(v.jsx)("div",{className:"post-item__text",children:x}),Object(v.jsx)(N,{element:t,deleteFunction:f,likeFunction:h,editLink:"/odinbook/posts/edit/".concat(t._id),initialLikeStatus:g,likes:c})]}):null},y=function(){return Object(v.jsx)("div",{className:"empty",children:Object(v.jsx)("p",{children:"Ups! there is nothing here"})})},C=function(e){var t=e.posts;return t.length>0?Object(v.jsx)("div",{className:"post-list",children:t.map((function(e){return Object(v.jsx)(w,{post:e,useLink:!0,defaultState:!0},e._id)}))}):Object(v.jsx)(y,{})},_=function(){var e=Object(r.useState)([]),t=Object(j.a)(e,2),n=t[0],s=t[1],a=function(){var e=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:t=e.sent,s(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){a()}),[]),Object(v.jsxs)("div",{className:"home",children:[Object(v.jsx)("h1",{children:"Home"}),Object(v.jsx)(g,{}),Object(v.jsx)(C,{posts:n})]})},J="https://immense-inlet-51361.herokuapp.com/",T=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(J+"signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r,s,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(J+"login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,s=r.user,a=r.token,localStorage.setItem("userSession",JSON.stringify({user:s,token:a})),e.abrupt("return",r);case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(J+"users/"+t,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+JSON.parse(localStorage.getItem("userSession")).token}});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(J+"users/others/"+t,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+JSON.parse(localStorage.getItem("userSession")).token}});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(J+"users/others",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+JSON.parse(localStorage.getItem("userSession")).token},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(J+"users/others",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+JSON.parse(localStorage.getItem("userSession")).token},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(p.a)(l.a.mark((function e(t,n){var r,s,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=11;break}return e.next=4,fetch(J+"users/requests",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+JSON.parse(localStorage.getItem("userSession")).token},body:JSON.stringify(n)});case 4:return r=e.sent,e.next=7,r.json();case 7:return s=e.sent,e.abrupt("return",s);case 11:return e.next=13,fetch(J+"users/others",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+JSON.parse(localStorage.getItem("userSession")).token},body:JSON.stringify(n)});case 13:return a=e.sent,e.next=16,a.json();case 16:return c=e.sent,e.abrupt("return",c);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(J+"users/friends",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+JSON.parse(localStorage.getItem("userSession")).token},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(r.useState)(""),t=Object(j.a)(e,2),n=t[0],s=t[1],a=Object(r.useState)(""),c=Object(j.a)(a,2),u=c[0],i=c[1],d=Object(r.useState)(""),b=Object(j.a)(d,2),f=b[0],h=b[1],O=Object(r.useState)(""),x=Object(j.a)(O,2),m=x[0],g=x[1],S=Object(r.useState)(""),k=Object(j.a)(S,2),N=k[0],w=k[1],y=function(){var e=Object(p.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),m!==N){e.next=6;break}return r={firstName:n,lastName:u,email:f,password:m},e.next=5,T(r);case 5:window.location.reload();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"sign-up",children:[Object(v.jsx)("h1",{children:"Sign Up on Odinbook"}),Object(v.jsxs)("form",{onSubmit:y,children:[Object(v.jsx)("label",{children:"First Name"}),Object(v.jsx)("input",{name:"firstName",type:"text",placeholder:"First Name",required:!0,value:n,maxLength:20,onChange:function(e){return s(e.target.value)}}),Object(v.jsx)("label",{children:"Last Name"}),Object(v.jsx)("input",{name:"lastName",type:"text",placeholder:"Last Name",maxLength:20,required:!0,value:u,onChange:function(e){return i(e.target.value)}}),Object(v.jsx)("label",{children:"Email"}),Object(v.jsx)("input",{name:"email",type:"text",placeholder:"Email",required:!0,value:f,onChange:function(e){return h(e.target.value)}}),Object(v.jsx)("label",{children:"Password"}),Object(v.jsx)("input",{name:"password",type:"password",required:!0,maxLength:20,placeholder:"Password",value:m,onChange:function(e){return g(e.target.value)}}),Object(v.jsx)("label",{children:"Confirm Password"}),Object(v.jsx)("input",{name:"confirm",type:"password",required:!0,maxLength:20,placeholder:"Confirm password",value:N,onChange:function(e){return w(e.target.value)}}),Object(v.jsx)("button",{children:"Sign Up"})]}),Object(v.jsx)("div",{className:"log-in__link",children:Object(v.jsxs)("p",{children:["You have an account? ",Object(v.jsx)(o.b,{to:"/odinbook/login",children:"Log in"})]})})]})},B=function(){var e=Object(r.useState)(""),t=Object(j.a)(e,2),n=t[0],s=t[1],a=Object(r.useState)(""),c=Object(j.a)(a,2),i=c[0],d=c[1],b=Object(u.g)(),f=function(){var e=Object(p.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r={username:n,password:i},e.next=4,L(r);case 4:b.push("/odinbook");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"log-in",children:[Object(v.jsx)("h1",{children:"Log in Odinbook"}),Object(v.jsxs)("form",{onSubmit:f,children:[Object(v.jsx)("label",{children:"Email"}),Object(v.jsx)("input",{name:"email",type:"text",placeholder:"Email",required:!0,value:n,onChange:function(e){return s(e.target.value)}}),Object(v.jsx)("label",{children:"Password"}),Object(v.jsx)("input",{name:"password",type:"password",required:!0,maxLength:50,placeholder:"Password",value:i,onChange:function(e){return d(e.target.value)}}),Object(v.jsx)("button",{children:"Log In"})]}),Object(v.jsx)("div",{className:"sign-up__link",children:Object(v.jsxs)("p",{children:["New to Odinbook? ",Object(v.jsx)(o.b,{to:"/odinbook/signup",children:"Create an account."})]})})]})},z=function(){var e=Object(u.g)(),t=k()?Object(v.jsx)("button",{onClick:function(t){t.preventDefault(),localStorage.clear(),e.push("/odinbook")},children:"Log Out"}):null;return Object(v.jsx)("div",{id:"log-out-container",children:t})},R=function(){var e=Object(u.g)(),t=k()?JSON.parse(localStorage.getItem("userSession")).user._id:null,n=function(t){e.push(t)};return k()?Object(v.jsx)("div",{className:"navbar",children:Object(v.jsxs)("div",{className:"open-session",children:[Object(v.jsx)("button",{onClick:function(){return n("/odinbook")},children:"Home"}),Object(v.jsxs)("div",{className:"open-session__links",children:[Object(v.jsx)("button",{onClick:function(){return n("/odinbook/users/".concat(t))},children:"Profile"}),Object(v.jsx)("button",{onClick:function(){return n("/odinbook/users")},children:"Find friends"}),Object(v.jsx)(z,{})]})]})}):null},U=function(e){var t=e.component,n=e.path,r=k()?Object(v.jsx)(u.b,{exact:!0,path:n,children:t}):Object(v.jsx)(u.a,{to:"/odinbook/login"});return Object(v.jsxs)("div",{children:[Object(v.jsx)(R,{}),r]})},G="https://immense-inlet-51361.herokuapp.com/",H=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(G+"comments",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+JSON.parse(localStorage.getItem("userSession")).token},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(G+"comments/"+t,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+JSON.parse(localStorage.getItem("userSession")).token},body:JSON.stringify({id:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(G+"comments/"+t,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+JSON.parse(localStorage.getItem("userSession")).token}});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(G+"comments/"+t.id,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+JSON.parse(localStorage.getItem("userSession")).token},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(G+"comments/"+t.id+"/like",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+JSON.parse(localStorage.getItem("userSession")).token},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),V=function(e){var t=e.comment,n=e.defaultState,s=JSON.parse(localStorage.getItem("userSession")).user._id,a=t.likes,c=Object(r.useState)(n),u=Object(j.a)(c,2),i=u[0],d=u[1],b=function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t._id);case 2:d(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(p.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q({user:s,id:t._id});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=a.includes(s)?"Liked":"Like";return i?Object(v.jsxs)("div",{className:"comment-item",children:[Object(v.jsx)(o.b,{to:"/odinbook/users/".concat(t.user._id),children:Object(v.jsxs)("p",{className:"comment-item__username",children:[t.user.firstName," ",t.user.lastName]})}),Object(v.jsx)("div",{className:"comment-item__text",children:Object(v.jsx)("p",{children:t.text})}),Object(v.jsx)(N,{element:t,deleteFunction:b,likeFunction:f,editLink:"/odinbook/comments/edit/".concat(t._id),initialLikeStatus:h,likes:a})]}):null},W=function(e){var t=e.comments;return Object(v.jsx)("div",{className:"comment-list",children:t.map((function(e){return Object(v.jsx)(V,{comment:e,defaultState:!0},e._id)}))})},X=function(){var e=Object(r.useState)(""),t=Object(j.a)(e,2),n=t[0],s=t[1],a=Object(u.h)().id,c=function(){var e=Object(p.a)(l.a.mark((function e(t){var r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=JSON.parse(localStorage.getItem("userSession")).user._id,s={post:a,text:n,user:r},e.next=5,H(s);case 5:window.location.reload();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{className:"comment-input",children:Object(v.jsxs)("form",{onSubmit:c,children:[Object(v.jsx)("textarea",{name:"text",placeholder:"Comment",required:!0,value:n,maxLength:200,onChange:function(e){return s(e.target.value)}}),Object(v.jsx)("button",{children:"Reply"})]})})},Z=function(){var e=Object(r.useState)(null),t=Object(j.a)(e,2),n=t[0],s=t[1],a=Object(r.useState)([]),c=Object(j.a)(a,2),o=c[0],i=c[1],d=Object(u.h)().id,b=function(){var e=Object(p.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(d);case 2:t=e.sent,n=t.postDetail,r=t.postComments,s(n),i(r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){b()}),[]),n?Object(v.jsxs)("div",{className:"post-page",children:[Object(v.jsxs)("p",{children:[n.user.firstName," ",n.user.lastName]}),Object(v.jsx)(w,{post:n,useLink:!1,defaultState:!0}),Object(v.jsx)(X,{}),Object(v.jsx)(W,{comments:o})]}):null},$=function(){var e=Object(u.h)().id,t=Object(r.useState)(null),n=Object(j.a)(t,2),s=n[0],a=n[1],c=Object(r.useState)(""),o=Object(j.a)(c,2),i=o[0],d=o[1],b=Object(u.g)(),h=function(){var t=Object(p.a)(l.a.mark((function t(){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f(e);case 2:n=t.sent,r=n.postDetail,a(r),d(r.text);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=Object(p.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),r={id:e,text:i,user:s.user,likes:s.likes},t.next=4,x(r);case 4:b.push("/odinbook/posts/".concat(s._id));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){h()}),[]),s?Object(v.jsxs)("div",{className:"post-edit",children:[Object(v.jsx)("h1",{children:"Edit Post"}),Object(v.jsxs)("form",{children:[Object(v.jsx)("textarea",{name:"text",required:!0,maxLength:200,value:i,onChange:function(e){return d(e.target.value)}}),Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{onClick:function(e){e.preventDefault(),b.goBack()},className:"edit-form__buttons",children:"Cancel"}),Object(v.jsx)("button",{onClick:O,className:"edit-form__buttons",children:"Save"})]})]})]}):null},ee=function(){var e=Object(u.h)().id,t=Object(r.useState)(null),n=Object(j.a)(t,2),s=n[0],a=n[1],c=Object(r.useState)(""),o=Object(j.a)(c,2),i=o[0],d=o[1],b=Object(u.g)(),f=function(){var t=Object(p.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y(e);case 2:n=t.sent,a(n),d(n.text);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),h=function(){var t=Object(p.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),r={id:e,text:i,user:s.user,post:s.post,likes:s.likes},t.next=4,K(r);case 4:b.push("/odinbook/posts/".concat(s.post));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){f()}),[]),s?Object(v.jsxs)("div",{className:"comment-edit",children:[Object(v.jsx)("h1",{children:"Edit Comment "}),Object(v.jsxs)("form",{children:[Object(v.jsx)("textarea",{name:"text",required:!0,maxLength:200,value:i,onChange:function(e){return d(e.target.value)}}),Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{onClick:function(e){e.preventDefault(),b.goBack()},className:"edit-form__buttons",children:"Cancel"}),Object(v.jsx)("button",{onClick:h,className:"edit-form__buttons",children:"Save"})]})]})]}):null},te=function(e){var t=e.user,n=JSON.parse(localStorage.getItem("userSession")).user._id,s=t._id,a=Object(r.useState)("Add Friend"),c=Object(j.a)(a,2),o=c[0],u=c[1],i={"Add Friend":Object(v.jsx)("button",{onClick:function(){return d()},children:"Add Friend"}),"Cancel Request":Object(v.jsx)("button",{onClick:function(){return b()},children:"Cancel Request"})},d=function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A({sender:n,receiver:s});case 2:u("Cancel Request");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q({sender:n,receiver:s});case 2:u("Add Friend");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{className:"add-friend",children:i[o]})},ne=function(e){var t=e.user,n=e.onDelete,r=JSON.parse(localStorage.getItem("userSession")).user._id,s=t._id,a=function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P({sender:r,friend:s});case 2:n();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{className:"delete-friend",children:Object(v.jsx)("button",{onClick:a,children:"Delete Friend"})})},re=function(e){var t=e.user,n=e.managaRequest,r=JSON.parse(localStorage.getItem("userSession")).user._id,s=t._id,a=function(){var e=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(t,{sender:s,receiver:r});case 2:n(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{onClick:function(){return a(!0)},className:"accept-friend",children:"Accept"}),Object(v.jsx)("button",{onClick:function(){return a(!1)},className:"reject-friend",children:"Reject"})]})},se=function(e){var t=e.user,n=e.option,s=Object(u.g)(),a=Object(r.useState)(n),c=Object(j.a)(a,2),o=c[0],i=c[1],l={NotFriends:Object(v.jsx)(te,{user:t}),Friends:Object(v.jsx)(ne,{user:t,onDelete:function(){return i("NotFriends")}}),Requests:Object(v.jsx)(re,{user:t,managaRequest:function(e){return p(e)}})},p=function(e){i(e?"Friends":"NotFriends")},d=Object(v.jsx)("button",{onClick:function(){return e="/odinbook/users/".concat(t._id),void s.push(e);var e},className:"user-name-button",children:t.firstName});return Object(v.jsxs)("div",{className:"user-item",children:[d,l[o]]})},ae=function(e){var t=e.users,n=e.option;return t.length>0?Object(v.jsx)("div",{className:"user-list",children:t.map((function(e){return Object(v.jsx)(se,{user:e,option:n},"option/".concat(e._id))}))}):Object(v.jsx)(y,{})},ce=function(){var e=Object(r.useState)(null),t=Object(j.a)(e,2),n=t[0],s=t[1],a=Object(r.useState)([]),c=Object(j.a)(a,2),o=c[0],i=c[1],d=Object(r.useState)(""),b=Object(j.a)(d,2),f=b[0],h=b[1],O=Object(u.h)().id,x=function(){var e=Object(p.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(O);case 2:t=e.sent,n=t.userDetail,r=t.userPosts,s(n),i(r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(e){var t={posts:Object(v.jsx)(C,{posts:o}),friends:Object(v.jsx)(ae,{users:n.friendList,option:"Friends"}),requests:Object(v.jsx)(ae,{users:n.friendRequests,option:"Requests"})};h(t[e])};if(Object(r.useEffect)((function(){x()}),[O]),n&&o){var g=(k()?JSON.parse(localStorage.getItem("userSession")).user._id:null)===n._id?Object(v.jsx)("button",{onClick:function(){return m("requests")},children:"Friend Requests"}):null;return Object(v.jsxs)("div",{className:"profile",children:[Object(v.jsxs)("h1",{className:"user-name",children:[n.firstName," ",n.lastName]}),Object(v.jsxs)("div",{className:"profile__content",children:[Object(v.jsx)("button",{onClick:function(){return m("posts")},children:"Post"}),Object(v.jsx)("button",{onClick:function(){return m("friends")},children:"Friends"}),g]}),f]})}return null},oe=function(){var e=Object(r.useState)(null),t=Object(j.a)(e,2),n=t[0],s=t[1],a=function(){var e=Object(p.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("userSession")).user._id,e.next=3,E(t);case 3:n=e.sent,s(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){a()}),[]),n?Object(v.jsx)("div",{children:Object(v.jsx)(ae,{users:n,option:"NotFriends"})}):null};var ue=function(){return Object(v.jsx)("div",{className:"App",children:Object(v.jsx)(o.a,{children:Object(v.jsxs)(u.d,{children:[Object(v.jsx)(u.b,{exact:!0,path:"/odinbook/signup",children:Object(v.jsx)(D,{})}),Object(v.jsx)(u.b,{exact:!0,path:"/odinbook/login",children:Object(v.jsx)(B,{})}),Object(v.jsx)(U,{component:Object(v.jsx)(ee,{}),path:"/odinbook/comments/edit/:id"}),Object(v.jsx)(U,{component:Object(v.jsx)($,{}),path:"/odinbook/posts/edit/:id"}),Object(v.jsx)(U,{component:Object(v.jsx)(Z,{}),path:"/odinbook/posts/:id"}),Object(v.jsx)(U,{component:Object(v.jsx)(ce,{}),path:"/odinbook/users/:id"}),Object(v.jsx)(U,{component:Object(v.jsx)(oe,{}),path:"/odinbook/users"}),Object(v.jsx)(U,{component:Object(v.jsx)(_,{}),path:"/odinbook"})]})})})};c.a.render(Object(v.jsx)(s.a.StrictMode,{children:Object(v.jsx)(ue,{})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.6be18742.chunk.js.map